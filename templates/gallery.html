{% extends "base.html" %}

{% block title %}图片画廊 - 图片分享应用{% endblock %}

{% block content %}
<h2>公共图片画廊</h2>

<p>这里展示了所有用户分享的图片</p>

{% if images %}
<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
    {% for image in images %}
    <div style="border: 1px solid #ddd; border-radius: 8px; padding: 15px; text-align: center; background: #f9f9f9;">
        <img src="{{ image.thumbnailURL or image.originalURL }}"
             alt="{{ image.caption }}"
             style="max-width: 100%; height: 200px; object-fit: cover; border-radius: 5px;">
        <div style="margin-top: 10px;">
            {% if image.caption %}
                <p><strong>{{ image.caption }}</strong></p>
            {% else %}
                <p><em>无描述</em></p>
            {% endif %}
            <small>图片ID: {{ image.imageID }}</small>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div style="text-align: center; margin: 40px 0;">
    <h3>还没有任何图片</h3>
    <p>成为第一个上传图片的用户吧！</p>
    {% if not current_user.is_authenticated %}
    <p><a href="{{ url_for('main.login') }}">登录</a>后即可上传图片</p>
    {% else %}
    <a href="{{ url_for('main.upload_image') }}"
       style="background: #007bff; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; display: inline-block;">
       上传图片
    </a>
    {% endif %}
</div>
{% endif %}
{% endblock %}
